(this["webpackJsonpauthorization-form"]=this["webpackJsonpauthorization-form"]||[]).push([[0],{35:function(n,e,t){},64:function(n,e,t){"use strict";t.r(e);var r={};t.r(r),t.d(r,"primaryColor",(function(){return Fn})),t.d(r,"secondaryColor",(function(){return zn})),t.d(r,"buttonHoverColor",(function(){return Un})),t.d(r,"teriaryColor",(function(){return In})),t.d(r,"errorColor",(function(){return En})),t.d(r,"tableHeaderColor",(function(){return Nn})),t.d(r,"tableBorderColor",(function(){return Tn})),t.d(r,"buttonFontColor",(function(){return Vn}));var a=t(1),o=t(0),i=t.n(o),s=t(25),c=t.n(s),u=(t(35),t(8)),l=t(9),d=t(11),b=t(10),h=t(3),m=t(2),p=t(20),f=t(5),j=t(13),x=t.n(j),g=t(16),O=t(17),v=t(12),y={mobile:"(max-width: ".concat("639px",")"),tablet:"(min-width: ".concat("640px",")")};function C(){var n=Object(h.a)(["\n  font-size: 12px;\n  color: ",";\n  text-decoration: none;\n  cursor: pointer;\n\n  &:hover {\n    color: ","; \n    text-decoration: underline\n  }\n"]);return C=function(){return n},n}function w(){var n=Object(h.a)(["\n  display: flex;\n  @media "," { \n    justify-content: space-around;\n  }\n\n  @media "," { \n    margin: 0 4px;\n    justify-content: space-between;\n  }\n\n"]);return w=function(){return n},n}function k(){var n=Object(h.a)(["\n  border: none;\n  padding: 15px;\n  width: 100%;\n  background-color: ",";\n  color: ",";\n  text-transform: uppercase;\n  font-weight: 700;\n  line-height: 100%;\n  cursor: pointer;\n  transition: background 0.3s, brightness 0.1s;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:active {\n    filter: brightness(90%);\n  }\n\n  &:focus {\n    outline: 0;\n  }\n"]);return k=function(){return n},n}function S(){var n=Object(h.a)(["\n  @media "," { \n    margin-top: 30px;\n    margin-bottom: 12px;\n  }\n\n  @media "," { \n    margin-top: 12px;\n    margin-bottom: 12px;\n  }\n"]);return S=function(){return n},n}function F(){var n=Object(h.a)(["\n  box-sizing: border-box;\n  border: 0;\n  border-bottom: 1px solid ",";\n  width: 100%;\n\n  @media "," { \n    padding: 10px 15px;\n  }\n\n  @media "," { \n    padding: 7px 15px;\n  }\n\n  &.has-error {\n    border-bottom: 1px solid ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-bottom: 1px solid ",";\n  }\n"]);return F=function(){return n},n}function z(){var n=Object(h.a)(["\n  @media "," { \n    margin-bottom: 25px;\n  }\n\n  @media "," { \n    margin-bottom: 15px;\n  }\n"]);return z=function(){return n},n}function U(){var n=Object(h.a)(["  \n  padding: 0;\n  margin: 0;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  font-size: 10px;\n  color: ",";\n"]);return U=function(){return n},n}function I(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media ","  { \n    max-width: 350px;\n  }\n\n  @media "," { \n    max-width: 250px;\n  }\n\n"]);return I=function(){return n},n}function E(){var n=Object(h.a)(["\n  padding: 0;\n  margin: 0;\n  font-size: 35px;\n  font-weight: normal;\n  color: ",";\n"]);return E=function(){return n},n}function N(){var n=Object(h.a)(["\n  align-self: center;\n  \n  @media "," { \n    margin-bottom: 25px;\n  }\n\n  @media "," { \n    margin-bottom: 20px;\n  }\n"]);return N=function(){return n},n}function T(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n\n  @media ","  { \n    padding: 48px 40px 40px;\n    min-width: 350px;\n  }\n\n  @media "," { \n    padding: 28px 20px 20px;\n    min-width: 250px;\n  }\n"]);return T=function(){return n},n}var V=m.b.form(T(),y.tablet,y.mobile),B=m.b.div(N(),y.tablet,y.mobile),M=m.b.h2(E(),(function(n){return n.theme.primaryColor})),H=m.b.div(I(),y.tablet,y.mobile),_=m.b.p(U(),(function(n){return n.theme.errorColor})),D=m.b.div(z(),y.tablet,y.mobile),A=m.b.input(F(),(function(n){return n.theme.teriaryColor}),y.tablet,y.mobile,(function(n){return n.theme.errorColor}),(function(n){return n.theme.primaryColor})),J=m.b.div(S(),y.tablet,y.mobile),L=m.b.button(k(),(function(n){return n.theme.primaryColor}),(function(n){return n.theme.buttonFontColor}),(function(n){return n.theme.buttonHoverColor})),P=m.b.div(w(),y.tablet,y.mobile),Y=m.b.a(C(),(function(n){return n.theme.primaryColor}),(function(n){return n.theme.secondaryColor})),G=function(n){Object(d.a)(t,n);var e=Object(b.a)(t);function t(n){var r;return Object(u.a)(this,t),(r=e.call(this,n)).state={username:"",password:"",formErrors:{username:"",password:""},usernameValid:!1,passwordValid:!1,formValid:!1,errorMessage:"",redirect:""},r.handleChange=r.handleChange.bind(Object(v.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(v.a)(r)),r}return Object(l.a)(t,[{key:"handleChange",value:function(n){var e=n.target.name,t=n.target.value;this.setState(Object(O.a)({},e,t))}},{key:"handleSubmit",value:function(n){n.preventDefault(),this.validateForm()}},{key:"validateForm",value:function(){var n=this,e=this.state.formErrors,t=this.state.usernameValid,r=this.state.passwordValid;this.state.username?this.state.username.length<1||this.state.username.length>20?e.username="\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 1 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":!1===/^[a-zA-Z1-9-_]+$/.test(this.state.username)?e.username="\u041b\u043e\u0433\u0438\u043d \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u0442\u0438\u0440\u0435 \u0438\u043b\u0438 \u0437\u043d\u0430\u043a \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u044f":parseInt(this.state.username.substr(0,1))?e.username="\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 \u0431\u0443\u043a\u0432\u044b":e.username="":e.username="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",e.password=this.state.password?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",t=""===e.username,r=""===e.password;var a=e.username?e.username:e.password;this.setState({formErrors:e,usernameValid:t,passwordValid:r,formValid:t&&r,errorMessage:a},(function(){n.state.formValid&&n.logIn()}))}},{key:"logIn",value:function(){var n=Object(g.a)(x.a.mark((function n(){var e,t,r,a;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",e={username:this.state.username,password:this.state.password},t={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)},n.next=5,fetch("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",t);case 5:return r=n.sent,n.next=8,r.json();case 8:a=n.sent,200===r.status?(this.saveToken(a.token),this.setState({redirect:"/users"})):this.setState({errorMessage:"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"});case 10:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"saveToken",value:function(n){localStorage.setItem("tokenData",JSON.stringify(n))}},{key:"errorClass",value:function(n){return n?"has-error":""}},{key:"render",value:function(){return this.state.redirect?Object(a.jsx)(f.a,{to:this.state.redirect}):Object(a.jsxs)(V,{onSubmit:this.handleSubmit,children:[Object(a.jsx)(B,{children:Object(a.jsx)(M,{children:"\u0412\u0445\u043e\u0434"})}),Object(a.jsx)(H,{children:Object(a.jsxs)(_,{children:[" ",this.state.errorMessage," "]})}),Object(a.jsx)(D,{children:Object(a.jsx)(A,{type:"text",name:"username",value:this.state.username,className:this.errorClass(this.state.formErrors.username),onChange:this.handleChange,placeholder:"\u041b\u043e\u0433\u0438\u043d",autocomplete:"on"})}),Object(a.jsx)(D,{children:Object(a.jsx)(A,{type:"password",name:"password",value:this.state.password,className:this.errorClass(this.state.formErrors.password),onChange:this.handleChange,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autocomplete:"on"})}),Object(a.jsx)(J,{children:Object(a.jsx)(L,{type:"submit",onClick:this.handleSubmit,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(a.jsxs)(P,{children:[Object(a.jsx)(Y,{href:"#",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(a.jsx)(Y,{href:"#",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}}]),t}(o.Component);function W(){var n=Object(h.a)(["\n  margin-top: 15vh;\n"]);return W=function(){return n},n}function Z(){var n=Object(h.a)(["\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n\n"]);return Z=function(){return n},n}var $=m.b.div(Z()),q=m.b.div(W()),K=function(n){Object(d.a)(t,n);var e=Object(b.a)(t);function t(){return Object(u.a)(this,t),e.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return Object(a.jsx)($,{children:Object(a.jsx)(q,{children:Object(a.jsx)(G,{})})})}}]),t}(i.a.Component);function Q(){var n=Object(h.a)(["\n  box-sizing: border-box;\n  height: 30px;\n  padding: 5.5px;\n  border: 1px solid ",";\n"]);return Q=function(){return n},n}var R=m.b.td(Q(),(function(n){return n.theme.tableBorderColor})),X=function(n){var e=t(43);return Object(a.jsxs)("tr",{children:[Object(a.jsx)(R,{children:n.user.id}),Object(a.jsx)(R,{children:n.user.username}),Object(a.jsx)(R,{children:n.user.first_name}),Object(a.jsx)(R,{children:n.user.last_name}),Object(a.jsx)(R,{children:n.user.is_active?"Yes":"No"}),Object(a.jsx)(R,{children:n.user.last_login?e(n.user.last_login,"dd.mm.yyyy HH:MM:ss"):""}),Object(a.jsx)(R,{children:n.user.is_superuser?"Yes":"No"})]})},nn=(t(44),t(29)),en=t.n(nn);function tn(){var n=Object(h.a)(["\n  margin-top: 30px;\n  text-align: center;\n"]);return tn=function(){return n},n}function rn(){var n=Object(h.a)(["\n  text-align: center;\n"]);return rn=function(){return n},n}function an(){var n=Object(h.a)(["\n  border: 1px solid #",";\n  padding: 11px 15px;\n  background-color: ",";\n  color: ",";\n"]);return an=function(){return n},n}function on(){var n=Object(h.a)(["\n  border-collapse: collapse;\n   \n"]);return on=function(){return n},n}function sn(){var n=Object(h.a)(["\n  @media "," { \n    margin-bottom: 20px;\n  }\n\n  @media "," { \n    margin-bottom: 15px;\n  }\n"]);return sn=function(){return n},n}function cn(){var n=Object(h.a)(["\n  box-sizing: border-box;\n  border: 0;\n  border-bottom: 1px solid ",";\n\n  @media "," { \n    padding: 10px 15px;\n    min-width: 220px;\n  }\n\n  @media "," { \n    font-size: 14px;\n    padding: 7px 15px;\n    min-width: 200px;\n  }\n\n   &:focus {\n    outline: none;\n    border-bottom: 1px solid ",";\n  }\n"]);return cn=function(){return n},n}var un=m.b.input(cn(),(function(n){return n.theme.teriaryColor}),y.tablet,y.mobile,(function(n){return n.theme.primaryColor})),ln=m.b.div(sn(),y.tablet,y.mobile),dn=m.b.table(on()),bn=m.b.th(an(),(function(n){return n.theme.tableHeaderColor}),(function(n){return n.theme.tableHeaderColor}),(function(n){return n.theme.buttonFontColor})),hn=m.b.p(rn()),mn=m.b.p(tn()),pn=function(n){Object(d.a)(t,n);var e=Object(b.a)(t);function t(n){var r;return Object(u.a)(this,t),(r=e.call(this,n)).state={users:[],filteredUsers:[],usernameFilter:"",loading:!0},r.handleChange=r.handleChange.bind(Object(v.a)(r)),r}return Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getUsers()}},{key:"getUsers",value:function(){var n=Object(g.a)(x.a.mark((function n(){var e,t,r,a,o,i,s=this;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e="https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",t=null,!localStorage.tokenData){n.next=6;break}t=JSON.parse(localStorage.tokenData),n.next=8;break;case 6:return console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 local storage"),n.abrupt("return",window.location.replace("/"));case 8:return r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}},t&&(r.headers.Authorization="Token ".concat(t)),n.next=12,fetch(e,r);case 12:a=n.sent,o=a.json(),i=[],200===a.status?o.then((function(n){for(var e in n)i.push(n[e])})).then((function(n){var e=s.sortById(i.slice());s.setState({users:e,filteredUsers:e,loading:!1})})):console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d");case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},{key:"sortById",value:function(n){return n.sort((function(n,e){return n.id>e.id?1:-1})),n.slice()}},{key:"handleChange",value:function(n){var e=n.target.name,t=n.target.value;this.setState(Object(O.a)({},e,t)),this.filterByUsername(t)}},{key:"filterByUsername",value:function(n){var e=this.state.users.filter((function(e){return-1!==e.username.indexOf(n)}));this.setState({filteredUsers:e.slice()})}},{key:"render",value:function(){var n=this.state.filteredUsers.map((function(n){return Object(a.jsx)(X,{user:n},n.id)}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ln,{children:Object(a.jsx)(un,{type:"text",name:"usernameFilter",placeholder:"Filter users by username...",onChange:this.handleChange})}),Object(a.jsxs)(dn,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(bn,{children:"Id"}),Object(a.jsx)(bn,{children:"Username"}),Object(a.jsx)(bn,{children:"Last Name"}),Object(a.jsx)(bn,{children:"First Name"}),Object(a.jsx)(bn,{children:"Is Active"}),Object(a.jsx)(bn,{children:"Last Login"}),Object(a.jsx)(bn,{children:"Is Superuser"})]})}),Object(a.jsx)("tbody",{children:n})]}),Object(a.jsx)(mn,{children:this.state.loading&&Object(a.jsx)(en.a,{type:"Oval",color:"#83a296",timeout:2e3,height:60,width:60})}),0===this.state.filteredUsers.length&&!this.state.loading&&Object(a.jsxs)(hn,{children:["Username that contains ",Object(a.jsxs)("b",{children:["'",this.state.usernameFilter,"'"]})," not found"]})]})}}]),t}(i.a.Component);function fn(){var n=Object(h.a)(["\n  padding: 0;\n  margin: 0;\n  font-weight: normal;\n  color: ",";\n\n  @media "," { \n    font-size: 35px;\n  }\n\n  @media "," { \n    font-size: 33px;\n  }\n"]);return fn=function(){return n},n}function jn(){var n=Object(h.a)(["\n  align-self: left;\n  \n  @media "," { \n    margin-top: 25px;\n    margin-bottom: 15px;\n  }\n\n  @media "," { \n    margin-top: 15px;\n    margin-bottom: 5px;\n  }\n"]);return jn=function(){return n},n}function xn(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n\n  box-sizing: border-box; \n  margin: 0 auto;\n\n  @media "," { \n    padding: 0 25px; \n    width: 1100px;\n  }\n\n  @media "," { \n    padding: 0 10px;\n  }\n"]);return xn=function(){return n},n}var gn=m.b.div(xn(),y.tablet,y.mobile),On=m.b.div(jn(),y.tablet,y.mobile),vn=m.b.h2(fn(),(function(n){return n.theme.primaryColor}),y.tablet,y.mobile),yn=function(n){Object(d.a)(t,n);var e=Object(b.a)(t);function t(){return Object(u.a)(this,t),e.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return Object(a.jsxs)(gn,{children:[Object(a.jsx)(On,{children:Object(a.jsx)(vn,{children:"All Users"})}),Object(a.jsx)(pn,{})]})}}]),t}(i.a.Component);function Cn(){var n=Object(h.a)(["\n  margin-top: 15vh;\n"]);return Cn=function(){return n},n}function wn(){var n=Object(h.a)(["\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n\n"]);return wn=function(){return n},n}m.b.div(wn()),m.b.div(Cn());var kn=function(n){Object(d.a)(t,n);var e=Object(b.a)(t);function t(){return Object(u.a)(this,t),e.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return Object(a.jsxs)(p.a,{basename:window.location.pathname||"",children:[Object(a.jsx)(f.b,{path:"/users",component:yn}),Object(a.jsx)(f.b,{exact:!0,path:"/",component:K})]})}}]),t}(i.a.PureComponent),Sn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,65)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;t(n),r(n),a(n),o(n),i(n)}))},Fn="#000000",zn="#C9987C",Un="#E4D2C1",In="#b3b3b3",En="#E04545",Nn="#83a296",Tn="#e3e3e3",Vn="#ffffff";c.a.render(Object(a.jsx)(m.a,{theme:r,children:Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(kn,{})})}),document.getElementById("root")),Sn()}},[[64,1,2]]]);
//# sourceMappingURL=main.755871a2.chunk.js.map